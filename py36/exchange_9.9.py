#!/bin/env python3
# -*- coding: utf-8 -*
'''
项目名称:exchange_9.9.py
Author: yangyang
功能：
Date: 2022-5-7
cron: 10 59 9,15 * * *
new Env("券后9.9");
'''
from exchange_lib import *

if __name__ == "__main__":
    url = "https://api.m.jd.com/client.action?functionId=centerReceiveCoupon&appid=XPMSGC2019&monitorSource=&client=m&eu=5616666313239356&fv=4683736316461646"
    headers = {
        "accept": "application/json, text/plain, */*",
        "accept-language": "en-US,en;q=0.9",
        "accept-encoding": "gzip, deflate, br",
        "content-type": "application/x-www-form-urlencoded",
        "origin": "https://h5.m.jd.com",
        "x-request-with": "com.jingdong.app.mall",
        "referer": "https://h5.m.jd.com/",
        "sec-fetch-dest": "empty",
        "sec-fetch-mode": "cors",
        "sec-fetch-site": "same-site"
    }
    # extend = "A0F322DB0C038E1603CAC2127B1D86BC0F09FFD58755FE96E1687E0350887FBA79997E8E037402B0F6EF97C2D50C376F1B80FD03148C5F7D1054DBAE7D8F6D995F271D3665A05F94AB2F5C83B6D04B1B80251EF1D2F4633121F074F21AB9B37948B88A080E5C2891179D54F7ABB3756673D538D9372A24D540DDFB6C7C4541793A8C1E67C32FD58559501873FAD35D3FAF0788F5881EF1D96C826EA822F393642E93EF2864D4897D9C3FD1FD190BDBDAB8B1A95438847E5310BAC4F859166A9DBAE68C094DD31B5C5003C4C44373373F"

    extend = "A0F322DB0C038E1603CAC2127B1D86BC0F09FFD58755FE96E1687E0350887FBA79997E8E037402B0F6EF97C2D50C376F1B80FD03148C5F7D1054DBAE7D8F6D995F271D3665A05F94AB2F5C83B6D04B1B80251EF1D2F4633121F074F21AB9B3795DEACE40B717C2B866502C1577E6DC65E9B3BA97EBD16C414EB97B9758C203763A8C1E67C32FD58559501873FAD35D3FAF0788F5881EF1D96C826EA822F393642E93EF2864D4897D9C3FD1FD190BDBDA0D3E790119A83BE78D78AB958319ABAABAE68C094DD31B5C5003C4C44373373F"
    body_dict = {
        "extend": extend,
        "rcType": "1", "source": "couponCenter_app", "random": "7172621", "couponSource": "1",
        "extraData": "{\"log\":\"1664262320487~1zcCSCr3sAvMDFHQ1hvTjAxMQ==.dnVuW3xxcWpWf3NzaxEUAHVgDAUOdzM/MHZvbkN7a3ImXTB2PSY=.e8166796~5,1~52A8C75FE07D55CA0A9C1BCBC761465F9927C7A4~1jjtok1~C~SBNBXhEDaWQVFEZbXhELbhFXCB8OARoEeh9mHUAfRxseG10DHwIEHwd4HwIKHggXBgIFH0cTGRFXDh8ODhoEeB8BCRkCHQkCCRVCEGgfEVZHXREDAwgVFEFGEQkTBAUFDQAPCwUDDAQDCQELAwwQFRtBV1ERCRNBR0dNRhsVFEVQUhELF1VVTUZNTUNTFx8RQVFdEQNpDRUDAAUfBR0EAh8IHgxkGhBfWRELBh8RWkEbAxRUUwUABQYGCl9XXQgCVldRVlACVQILBg8BAAFQVgIDUREfG1xJGwwQeVpdRE0TUlhAWlEABhcfEUUXCQIPBA0LAAAGAQMFDQQfG1hSGwwQGARQAQYGVl9QCgBVARhWUlcDAgEAV10BAQRUV1JVGFYBDwMNCQVXDQoBVFBVBwAHWg1TA1QDCgBXCgsMUA5cAFRRAQcTGRFVSVAbAxQQGRFdRxcJEX5dVl5aVxV6XVIbER8bXFhPFAgXCgsCBgMRFRBKWkQQD2gLAA0fAAABZBUUQFoRCWoXfnoZChsVFFNbV0FeXFcRFRAAGxoQBAIdAxsFERUQAAEFAQURHxMABQIPBA8PBQMGAQAIBgYFFAYPAQUFBgUAAAMHBQgEDQ8UHhcCEWwZEVpWUxsDFFRTVVVXU0dHGx4bWFwQDxFGExkRUFAQAxtBARsCHQEXHxFaVGZPFAgXAwITGRFRXRADG0RTW1dcXAgEAg4ADwsHEBkRXlsXCWgIHgkVBm8ZEVFdWlQRAxAIDwAGBwUBAw0EBQEERwh7UFlrZmNQW0VDf31zXWhtdUplYXJKdFUEBBhkY317Y1sKYG9na3xQA3dmYmBCY2ttUV54XGBkcXZocn5Eb3h6CANcZnViYWd3fW91QQFvfkJ6XH9mVEZ1cG9+ZkhWGHdLBQpyXmdxfnRzRGNgeAV7SUp1fWxjW1NlRGNzYFxwdmpoUHNnRHp9d2ZHcWBsYXFnbwR3dFJ0dmFZanxiZwd/SgRgfWBwfn9qf0d7WmZ4Y3BYCHNRbGBzcFBRemd6BHIBCX51Smd0f3MBV2BsZ2NwTmNdeHtGd39LdAZwb3NjeHELdntycl9weE5/Z3Bif3BnZkBwWUpPegNkVHxIWWJ9fGdfX0wCfHZaXg16d3wHdHtRZHBifnpyRH1sdENeUGpncmpwW1h7fWd3fWZzd2t/WWBJHQsLCwAABwVSTUkZAk1HTHtHYgJzdWJwDWZmaAd+emN8ZGsCBVd2X153flJ4VmJhZX5zAnpuZWtvd3VnYWRjQkt7b0psWHNebHBSWXRkcFFrentjc292ZnN3d2Z4cXh4B2ZzdlhkbVhianYJYHBhUmZgdndxUnxaWnNwXnh0ZlZkZnRsVm99dGN7dXV8cmBUXXt7UXx4SwJBAUFXRksQFRtbQVIRCRMXTg==~19cnnnp\",\"sceneid\":\"couponNinePointNineHome\"}"}

    # 感冒灵
    extend = "43637CD87226EA2E335863F219ABC3D7F6C12FFEF67B4A334C3FD21871640F7283AB3B66E44F81A17C1A6A624A9DA4801B80FD03148C5F7D1054DBAE7D8F6D995F271D3665A05F94AB2F5C83B6D04B1BE54C50985C41FD2D58DBA76F2CD6DB02AC56646B328B4C44646B973087A7213FF3A98E7DBB08CFBC1DFCF12089B6A3533A8C1E67C32FD58559501873FAD35D3FED6926BB1743834D4361F61A275BD74B2E93EF2864D4897D9C3FD1FD190BDBDA8FE0F737B1945FC4B1D71C3FE08EF38392E65B68F750B18F516AF30F55398C7150AC93F8FAD90D456227C60734534054"
    body_dict = {
        "extend": extend,
        "rcType":"1","source":"couponCenter_app","random":"2908621","couponSource":"1","extraData":"{\"log\":\"1664298182254~1KDw59zPMGzMDF3bE5FRTAxMQ==.Rlp4cXdOVH9zc0VVejsQGDV3HCk9VB8HO0ZAeGlwW10wdztGEjA=.59d6dec8~5,1~9F31050F51E8246CEDE624F5182C8C173B9BEB47~0rr2xke~C~SRZNWhACbG4fGkVbVBAOYhVWDRoFZRQHZBV2fgkbAxYHAwMURRcVEFAOGgRuGwViFHV+dh4FFwcCCBtHEWUdF15AWhsNAxQVQEAaCxcIBAINBQsABgUHDQYCDwoMDBUeGkBWVxoLF01GQE1DEBQVRFZZEw8bVFJNQ0ZMQlIRFBNFXVwWA2wGFAIBAxQHGQgDGAgbB2UbEVlSEw8IHhZaRBACFVVVDgIBCgcNX1JWCQNXUVpUVA5UBQsDBAABAFZdAAddEBgbWUIaDRF/UV9AQRJVWEVRUAEHERQTQRsIBQ8BBgoOCwIAAwcMBhgbXVkaDREeD1IFCgdRX1UBAVQAHl1QUw8DBgBSVgAABVJcUFEUVwYPBgYIBFYLAQNQXFQAAAJRDFICUggIBFsLDAxVBV0BVVcKBRcVEFJJVRACFREfGl9DGwgWflhdX1tWE3FfVhcQGBtZU04VCREBCQYKAhYVFUFbRREJYwkEAR4HAARvFBVBXBoLbht/fRkPEBQVUl1cQ1pQVhYVFQsaGxECCR8HFwQWFRULAAQAAxodFwwEBQ8BBA4EAgAKAgwKBwIUAwQABAQADgIEDwYCCAEGDhUfEQkTaBUQXVZWEAIVVVVeV1NfRkAbGxBZXREJGkQXFRBXUBUIGkAAHQkfBRseFlpRbU4VCREIABcVEFZdFQgaRVJdXF5YBAANCQ8ECgYRHxpcXxsIbwgbAhQHbh8aU1lWVRYDFQMOAQcBAQkEDAEHDAVMCX5nAEsFf25LBmN6dnIDVl1ye2NDc010UA8FGWBmQHRTbmR2bWJGAG0DdXVgT1plYFIPRXFfRAN1WlZxeWZVYHF/YQplfUJ4X0tYc3VwT119YQwCe1F/BHR2Qn51cANRdHENdXN7XGt/TkBEcWUFCnh3fFZ3U25paQhwen9acWpyZktUfFRhZHhBa2N7QFlxcF0CUHRzWnR/VHp9fF1qfXZlf3V8XFJlcWwHR3dsCWBqS1t2cHNTfHIAT3N7aAIAfHBRWXFxVwF/UnBxZ1cDdmhAQFp9A2xdf3Z4c30IB2N+QWBWcnAMWmdKYWJnA1tGck5ZTnBvcwl6A0BScHF3f38JblliZHZrfWNwVGJ3DQFxT355d19wTXhgDXVxc3VxYmIAU3puf1Z8XHAMfVtLcX1mDUIaC1UEXFMLVghPTBUDSkdJcEZkW31/dGReYGJ/X3NucmFrb10NXWBYQWZ6CH1XZHpwUXwDYWt0cH5ja3UIZmQIXnVvdQNqZXZpXWlzb3pjCH5UbmJpdGB3e19lYk1WZG1yVWZ+SWxsZERsZVp9UnYCcWZ2a3BnfF8Ka2ACV05jZ3R4cV5yc31PA2RqSXR1d0NadnBPcmB7QHtnaEp9c3JFdVRycXlVcAhecHx2QWx1cnp7cF1wVHFVQ2t9UFhnbXB4X3N2AXN0UwMOTQhQX1pHWEEVHhpaQFQaCxcbTw==~0a6rhcq\",\"sceneid\":\"couponNinePointNineHome\"}"}

    args = parseArgs()

    ExchangeManagement(
        url=url,
        headers=headers,
        headers_user_agent_random_flag=False,
        user_agent="jdapp;android;10.5.2;;;appBuild/96428;ef/1;ep/%7B%22hdid%22%3A%22JM9F1ywUPwflvMIpYPok0tt5k9kW4ArJEU3lfLhxBqw%3D%22%2C%22ts%22%3A1655122900598%2C%22ridx%22%3A-1%2C%22cipher%22%3A%7B%22sv%22%3A%22EG%3D%3D%22%2C%22ad%22%3A%22EJvuZwZtYwYnCtqzDtrwDK%3D%3D%22%2C%22od%22%3A%22YtLwCzc0DQG3ZNOzEQS2Zq%3D%3D%22%2C%22ov%22%3A%22Ctq%3D%22%2C%22ud%22%3A%22EJvuZwZtYwYnCtqzDtrwDK%3D%3D%22%7D%2C%22ciphertype%22%3A5%2C%22version%22%3A%221.2.0%22%2C%22appname%22%3A%22com.jingdong.app.mall%22%7D;jdSupportDarkMode/0;Mozilla/5.0 (Linux; Android 9; MI 6 Build/PKQ1.190118.001; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/89.0.4389.72 MQQBrowser/6.2 TBS/046010 Mobile Safari/537.36",
        body_dict=body_dict,
        batch_size=args.batch_size if args.batch_size > 0 else 12,
        other_batch_size=0,
        second_ahead=0.16,
        sleep_time=0,
        thread_number=args.thread_number if args.thread_number > 0 else 35,
        append_flag=False,
        log_flag=False,
        sign_flag=False,
        day_or_week='day',
        post_flag=True,
        print_type="cmd",
        proxy_flag=args.proxy_flag if args.proxy_flag else False,
        coupon_type="9.9",
        cookie_type=args.cookie_type if args.cookie_type != 'None' else 'mine_coupons') \
    .executeInDesktop(
        clock_list=[10],
        debug_flag=args.debug_flag if args.debug_flag else False
    )
